



# clothing-shoping project

---

é¡¹ç›®ç»“æ„

![image-20230910094435475](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309100944630.png)

[scss](https://sass-lang.com/)

![image-20230910095050964](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309100950082.png)

æ„å»ºæ•°æ®

![image-20230910095127449](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309100951534.png)

category-item

```jsx
import "./category-item.scss";
const CategoryItem = ({ category }) => {
  const { imageUrl, title } = category;
  return (
    <div className="category-container">
      <div
        className="background-image"
        style={{
          backgroundImage: `url(${imageUrl})`,
        }}
      ></div>
      <div className="category-body-container">
        <h1>{title}</h1>
        <p>shop cart</p>
      </div>
    </div>
  );
};
export default CategoryItem;
```

æ•ˆæœ

![image-20230910095358147](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309100953224.png)

directory-component

```jsx
import CategoryItem from "../category-item/category-item";
import "./directory.component.scss";
const Directory = ({ categorys }) => {
  return (
    <div className="directory-cointainer">
      {categorys.map(category => (
        <CategoryItem key={category.id} category={category} />
      ))}
    </div>
  );
};
export default Directory;
```
<<<<<<< HEAD
<<<<<<< HEAD
=======

#### react-router-dom

[click hereğŸ‘‰ï¸](https://reactrouter.com/en/main/start/tutorial)
åœ¨ä¼ ç»Ÿç½‘ç«™ä¸­ï¼Œæµè§ˆå™¨ä» Web æœåŠ¡å™¨è¯·æ±‚æ–‡æ¡£ï¼Œä¸‹è½½å¹¶è¯„ä¼° CSS å’Œ JavaScript èµ„æºï¼Œå¹¶å‘ˆç°ä»æœåŠ¡å™¨å‘é€çš„ HTMLã€‚å½“ç”¨æˆ·å•å‡»é“¾æ¥æ—¶ï¼Œå®ƒä¼šåœ¨æ–°é¡µé¢ä¸Šé‡æ–°å¯åŠ¨è¯¥è¿‡ç¨‹ã€‚

å®¢æˆ·ç«¯è·¯ç”±å…è®¸æ‚¨çš„åº”ç”¨ç¨‹åºé€šè¿‡é“¾æ¥ç‚¹å‡»æ›´æ–° URLï¼Œè€Œæ— éœ€ä»æœåŠ¡å™¨å†æ¬¡è¯·æ±‚å¦ä¸€ä¸ªæ–‡æ¡£ã€‚ç›¸åï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥ç«‹å³å‘ˆç°ä¸€äº›æ–°çš„ UI å¹¶å‘å‡ºæ•°æ®è¯·æ±‚ï¼Œä»¥`fetch`ä½¿ç”¨æ–°ä¿¡æ¯æ›´æ–°é¡µé¢ã€‚

è¿™å¯ä»¥å®ç°æ›´å¿«çš„ç”¨æˆ·ä½“éªŒï¼Œå› ä¸ºæµè§ˆå™¨ä¸éœ€è¦è¯·æ±‚å…¨æ–°çš„æ–‡æ¡£æˆ–é‡æ–°è¯„ä¼°ä¸‹ä¸€é¡µçš„ CSS å’Œ JavaScript èµ„æºã€‚å®ƒè¿˜é€šè¿‡åŠ¨ç”»ç­‰æ–¹å¼å®ç°æ›´åŠ¨æ€çš„ç”¨æˆ·ä½“éªŒã€‚

##### browserRouter

A `<BrowserRouter>` stores the current location in the browser's address bar using clean URLs and navigates using the browser's built-in history stack.

```jsx
import { BrowserRouter } from "react-router-dom";

root.render(
  <React.StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>
);
```

##### Routes, route

è·¯ç”±å¯èƒ½æ˜¯ React Router åº”ç”¨ç¨‹åºä¸­æœ€é‡è¦çš„éƒ¨åˆ†ã€‚å®ƒä»¬å°† URL æ®µä¸ç»„ä»¶ã€æ•°æ®åŠ è½½å’Œæ•°æ®çªå˜è€¦åˆèµ·æ¥ã€‚é€šè¿‡è·¯ç”±åµŒå¥—ï¼Œå¤æ‚çš„åº”ç”¨ç¨‹åºå¸ƒå±€å’Œæ•°æ®ä¾èµ–å…³ç³»å˜å¾—ç®€å•ä¸”å…·æœ‰å£°æ˜æ€§ã€‚

```
import { Routes, Route } from "react-router-dom";
```

```jsx
return (
  <Routes>
    <Route path="/" element={<Home />}></Route>
    <Route path="/shop" element={<Shop />}></Route>
  </Routes>
);
```

![image-20230911114059833](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309111141818.png)

![image-20230911114107955](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309111141079.png)

nest route

```jsx
 <Routes>
      <Route path="/" element={<Navigator />}>
        <Route path="home" element={<Home />}></Route>
        <Route path="shop" element={<Shop />}></Route>
      </Route>
```
è¿™é‡Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨indexï¼Œæ›¿æ¢æ‰å­è·¯ç”±å¾—è·¯å¾„ï¼Œlike this
```jsx
<Routes>
<Route path="/" element={<Navigator/>}/>
<Route index element={<Home/>}/>
<Route path="shop" element={<Shop/>}/>
</Routes>
```
è¿™æ ·ç›´æ¥æ‰“å¼€ç½‘é¡µå°±ä¼šæ˜¾ç¤ºhomeï¼Œå’Œnavigation

![image-20230911122834746](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309111228502.png)
>>>>>>> jack-study-navigation
=======
```
import { ReactComponent as CrowLogo } from "../../assets/crown.svg";
```
{ ReactComponent as CrowLogo }ï¼šè¿™éƒ¨åˆ†ä»£ç æ˜¯å°† SVG å›¾åƒä½œä¸º React ç»„ä»¶å¯¼å…¥ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå¯¼å…¥äº†ä¸€ä¸ªåä¸º CrowLogo çš„ React ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å°†ä»£è¡¨å¯¼å…¥çš„ SVG å›¾åƒã€‚
e.g
```
 <Link className="nav-logo__container" to="/">
          <CrowLogo className="nav-logo" />
          
        </Link>
```
<<<<<<< HEAD
>>>>>>> jack-study-navigation
=======
firebase
[click here ğŸ‘](https://console.firebase.google.com/project/fast-gate-386514/overview)

Firebase æ˜¯ç”± Google æä¾›çš„ç§»åŠ¨åº”ç”¨å’Œ Web åº”ç”¨å¼€å‘å¹³å°ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—å·¥å…·å’ŒæœåŠ¡ï¼Œç”¨äºæ„å»ºé«˜è´¨é‡çš„åº”ç”¨ç¨‹åºã€‚Firebase æä¾›äº†å¤šç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬å®æ—¶æ•°æ®åº“ã€èº«ä»½è®¤è¯ã€äº‘å­˜å‚¨ã€äº‘å‡½æ•°ã€æ¨é€é€šçŸ¥ã€æ€§èƒ½ç›‘æ§ã€åˆ†æç­‰ã€‚ä¸‹é¢æ˜¯ Firebase æä¾›çš„ä¸€äº›ä¸»è¦åŠŸèƒ½å’ŒæœåŠ¡ï¼š
<<<<<<< HEAD
>>>>>>> jack-study-navigation
=======



##### REACT CURD

![IMG_1469(20230912-101328)](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309121030174.JPG)



fetch data from firebase 

e.g1 Anderi  fetch his own profile, Authentication after server send his profile to him

![IMG_1470(20230912-103044)](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309121031606.JPG)

e.g2 Andrei want request  YiHua profile ,after Authentication, server not send the data to him

![IMG_1471(20230912-103104)](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309121033680.JPG)

use firebase

```javascript
const firebaseApp = initializeApp(firebaseConfig);
const provider = new GoogleAuthProvider();
provider.setCustomParameters({
  prompt: "select_account",
});
export const auth = getAuth();
export const signInWithGooglePop = () => signInWithPopup(auth, provider);
const db = getFirestore();
export const createUserDocumentFromAuth = userAuth => {
  const userDocRef = doc(db, "user", userAuth.uid);
  console.log(userDocRef);
};

```

![image-20230912132605082](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309121326321.png)

component 

```jsx
import {
  signInWithGooglePop,
  createUserDocumentFromAuth,
} from "../../utils/firebase.utils";

const Sign = () => {
  const loginGoogleUser = async () => {
    const {user} = await signInWithGooglePop();
    // console.log(user);
    createUserDocumentFromAuth(user)
  };
  return (
    <div>
      <h1>sign in</h1>
      <button onClick={loginGoogleUser}>sign with google user</button>
    </div>
  );
};

export default Sign;

```

![image-20230912135650752](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309121356862.png)

![image-20230912135617113](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309121356197.png)

sign with redirect

```javascript
export const signInWithGoogleRedirect = () =>
  signInWithRedirect(auth, googleProvider);
```

è¿™é‡Œæˆ‘ä»¬ä»£ç æ‰§è¡Œå®Œæˆåï¼Œæ§åˆ¶å°å´æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œä½†æ˜¯æˆ‘ä»¬æ£€æŸ¥firebaseï¼Œä»–è¿˜æ˜¯æ·»åŠ æˆåŠŸ

```jsx
  const loginWithRedirect = async () => {
    const { user } = await signInWithGoogleRedirect();
    console.log(user);
  };
```

å°½ç®¡æˆ‘ä»¬è¿™é‡Œæœ‰consoleè¯­å¥ï¼Œä½†æ˜¯æ§åˆ¶å°æ²¡æœ‰è¾“å‡ºä»»ä½•æœ‰å…³

![image-20230912144150508](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309121441630.png)

ä½†æ˜¯æˆ‘ä»¬ç”¨popupæ‰§è¡Œï¼Œæ§åˆ¶å°è¾“å‡º

![image-20230912144258196](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309121442263.png)

![image-20230912143937404](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309121439688.png)

æˆ‘ä»¬å¯ä»¥åˆ©ç”¨getRedirectResultï¼ŒuseEffect hookå»è§£å†³

```jsx
import { getRedirectResult } from "firebase/auth";
import { useEffect } from "react";

```

```jsx
 useEffect(() => {
    const fetchData = async () => {
      try {
        const res = await getRedirectResult(auth);
        console.log(res);
      } catch (error) {
        console.error("Error fetching redirect result:", error);
      }
    };

    fetchData(); // è°ƒç”¨å¼‚æ­¥å‡½æ•°
  }, []);
```
å½“çŠ¶æ€æ”¹å˜æ—¶å‘ç”Ÿ
```javascript
  const onHandleChanged = e => {
    console.log(e.target); //<input id="name" name="displayName" type="text" required="" value="22">
    const { name, value } = e.target;
    console.log(name, value);
    setFormFields({ ...formFields, [name]: value });// è¿™é‡Œé‡‡ç”¨æ‰©å±•è¯­æ³•ï¼Œåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–¹æ‹¬å·è¯­æ³•[express]ï¼Œè·Ÿè¡¨è¾¾å¼ï¼švalueå°±æ˜¯åé¢çš„å€¼
    è¾“å‡ºå°±åƒè¿™æ · {displayName: '2'}
    console.log({[name]: value});
  };
// {displayName: '2', email: '23', password: '', confirmPassword: ''}
```
æ ‡ç­¾é‡Œé¢çš„å€¼
```javascript
  <label >display name</label>
        <input
          id="name"
          name="displayName"
          type="text"
          onChange={onHandleChanged}
          required
          value={displayName}
        />
```
åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œèµ‹å€¼
```javascript
const defaultFormField = {
  displayName: "",
  email: "",
  password: "",
  confirmPassword: "",
};
```
åˆ©ç”¨useState
```jsx
  const [formFields, setFormFields] = useState(defaultFormField);
const { displayName, email, password, confirmPassword } = formFields; // è§£æ„è¿™ä¸ªå¯¹è±¡
```

formInput component
```jsx
import "./formInput.style.scss";
const FromInput = ({ label, ...otherProps }) => {
  return (
    <div className="form-input__container">
      <input className="form-input__text" {...otherProps} />
      {label && (
        <label
          className={`${
            otherProps.value.length ? "shrink" : ""
          } form-input__label`}
        >
          {label}
        </label>
      )}
    </div>
  );
};
export default FromInput;

```

è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†ï¼ŒçŸ­è·¯æ“ä½œç¬¦

```jsx
{label && (
        <label
          className={`${
            otherProps.value.length ? "shrink" : ""
          } form-input__label`}
        >
          {label}
        </label>
      )}
// å½“labelä¸ºtrueæ—¶ï¼Œæˆ‘ä»¬å°±è¿è¡Œå³çš„ã€‚
```

æˆ‘ä»¬æ³¨æ„åˆ°è¿™é‡Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œlabelï¼Œè¿˜æœ‰ä¸€ä¸ªæ‰©å±•è¯­æ³•ç»„æˆçš„å‚æ•°

å½“æˆ‘ä»¬çˆ¶ç»„ä»¶è°ƒç”¨æ—¶

```jsx
    <FromInput
          label="displayName"
          id="name"
          name="displayName"
          type="text"
          onChange={onHandleChanged}
          required
          value={displayName}
        />
```

è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªä¼ é€’äº†ä¸€äº›åˆ—å‚æ•°ï¼Œè¿™æ ·å°±å¾ˆæ–¹ä¾¿ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠä»–æ”¾åœ¨ä¸€ä¸ªobjecté‡Œé¢

```jsx
<FromInput
          label="displayName"
          inputOptions={{
            id: "name",
            name: "displayName",
            type: "text",
            onChange: onHandleChanged,
            required: true,
            value: displayName,
          }}
        />
```

![image-20230914151623801](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309141516082.png)
<<<<<<< HEAD
>>>>>>> jack-study-navigation
=======

##### Sign in

æˆ‘ä»¬å…ˆcopy ä¸€ä»½ä»sign up 

æˆ‘ä»¬ç»§ç»­åœ¨sign inåˆ›å»ºä¸€ä¸ªgoogleç™»é™†æ–¹æ³•

```jsx
  const signWithGoogle = async () => {
    const { user } = await signInWithGooglePop();
    // console.log(user);
    await createUserDocumentFromAuth(user);
  };
```

æˆ‘ä»¬ä¿®æ”¹ onHandleSubmitï¼ˆï¼‰ï¼Œtry block

```jsx
 try {
      const response = await signInAuthUserWithEmailAndPassword(
        email,
        password
      );
      console.log(response);
      /**
       * clear form input
       */
      resetFormField();
    }
```

catch

```jsx
catch (error) {
      switch (error.code) {
        case "auth/user-not-found":
          alert("ğŸ‘¤.user not found, please try again, \u{1F920} ");
          break;
        case "auth/wrong-password":
          alert("ğŸ”‘.password is incorrect, please try again");
          break;
        default:
          console.log(error);
      }
    }
```

input changed ()

```jsx
  const onHandleChanged = e => {
    console.log(e.target);
    const { name, value } = e.target;
    console.log(name, value);
    setFormFields({ ...formFields, [name]: value });
    console.log({ [name]: value });
  };
```



authen page

```jsx
  return (
    <div className="authentication-container">
      <SignInForm />
      <SignUpForm />
    </div>
  );
```

![image-20230915105443833](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309151054306.png)

### useContext

![IMG_1474(20230915-103813)](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309151055699.JPG)

Lifting state up

![Diagram with a tree of three components. The parent contains a bubble representing a value highlighted in purple. The value flows down to each of the two children, both highlighted in purple.](https://react.dev/_next/image?url=%2Fimages%2Fdocs%2Fdiagrams%2Fpassing_data_lifting_state.dark.png&w=1920&q=75)

Prop drilling

![Diagram with a tree of ten nodes, each node with two children or less. The root node contains a bubble representing a value highlighted in purple. The value flows down through the two children, each of which pass the value but do not contain it. The left child passes the value down to two children which are both highlighted purple. The right child of the root passes the value through to one of its two children - the right one, which is highlighted purple. That child passed the value through its single child, which passes it down to both of its two children, which are highlighted purple.](https://react.dev/_next/image?url=%2Fimages%2Fdocs%2Fdiagrams%2Fpassing_data_prop_drilling.dark.png&w=1920&q=75)

Using context in close children

![Diagram with a tree of three components. The parent contains a bubble representing a value highlighted in orange which projects down to the two children, each highlighted in orange.](https://react.dev/_next/image?url=%2Fimages%2Fdocs%2Fdiagrams%2Fpassing_data_context_close.dark.png&w=1920&q=75)

Using context in distant children

![Diagram with a tree of ten nodes, each node with two children or less. The root parent node contains a bubble representing a value highlighted in orange. The value projects down directly to four leaves and one intermediate component in the tree, which are all highlighted in orange. None of the other intermediate components are highlighted.](https://react.dev/_next/image?url=%2Fimages%2Fdocs%2Fdiagrams%2Fpassing_data_context_far.dark.png&w=1920&q=75)

useContext, createContext
```javascript
import { createContext, useState } from "react";


```
createContext
```javascript
export const UserContext = createContext({
  currentUser: null,
  setCurrentUser: () => null,
});
```
Provider
```javascript

export const UserProvider = ({ children }) => {
  const [currentUser, setCurrentUser] = useState(null);
  const value = { currentUser, setCurrentUser };
  return <UserContext.Provider value={value}>{children}</UserContext.Provider>;
};
```
å»ç”¨æˆ‘ä»¬çš„context
```javascript
      <UserProvider>
        <App />
      </UserProvider>
```
åœ¨æˆ‘ä»¬éœ€è¦çš„åœ°æ–¹signIn.jsxï¼Œç”¨setCurrentUser,å­˜å…¥æ•°æ®
like this
```javascript
   const { user } = await signInAuthUserWithEmailAndPassword(
        email,
        password
      );
      console.log(user)
      setCurrentUser(user);
  
```
æˆ‘ä»¬åœ¨navigation.jsx ä½¿ç”¨å®ƒ

useContextï¼Œå°±æ˜¯å½“ä»–çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜åï¼Œä»–ä¼šrerender componentï¼Œä¸ç®¡æœ‰æ²¡æœ‰ä½¿ç”¨å®ƒ

åƒè¿™é‡Œæˆ‘ä»¬åœ¨signUpå°†useContextå€¼ï¼Œèµ‹å€¼ç»™valå˜é‡

```jsx
  const val = useContext(UserContext);
console.log('hit')
```

å½“æˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨ï¼Œä»–ä¼šè¢«ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼Œè¿™æ˜¯è‚¯å®šçš„

![image-20230919104008185](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309191040426.png)

â€‹    ç„¶åå½“æˆ‘ä»¬ç‚¹å‡»signInæŒ‰é’®æ—¶ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨signä½¿ç”¨äº†

```jsx
   const { user } = await signInAuthUserWithEmailAndPassword(
        email,
        password
      );
      setCurrentUser(user);
```

å¦‚æœæˆ‘ä»¬è§¦å‘è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒçš„å€¼è¿˜æ˜¯null'ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»sign in buttonåï¼Œç°åœ¨currentUseré‡Œé¢å°±æ˜¯userå¯¹è±¡äº†ï¼Œ

æ‰€ä»¥useContextçŠ¶æ€å°±æ”¹å˜äº†ï¼Œæ‰€ä»¥ä¼šå†ä¸€æ¬¡æ¸²æŸ“ï¼Œcomponentï¼Œæ‰€ä»¥è‡ªç„¶çš„ï¼Œconsoleåœ¨å‡ºç°ä¸€éã€‚

usecontextè®°å½•login state info

![image-20230919130043209](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309191300338.png)

ç°åœ¨æˆ‘ä»¬åˆ©ç”¨firebase è‡ªå¸¦ onAuthStateChanged å»è®°å½•login info

```jsx
export const onAuthStateChangedListener =  (callback) => {
  onAuthStateChanged(auth, callback);
};

```

æˆ‘ä»¬å°±æ³¨é‡Šæ‰useContext çš„setCurentUser()

![image-20230919130327798](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309191303860.png)![image-20230919130342278](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309191303331.png)

å½“æˆ‘ä»¬ç‚¹å‡»sign In æŒ‰é’®æ—¶ï¼Œæ§åˆ¶å°ä»»ç„¶è¾“å‡º

![image-20230919130519225](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309191305304.png)

è¿™å°±æ˜¯firebaseè‡ªå¸¦çš„apiè®°å½•ï¼Œå°½ç®¡æˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œä»–è¿˜æ˜¯ä¼šä¿å­˜åœ¨firebaseä¸Š

<video src="D:\Video\Captures\React App - Google Chrome 2023-09-19 13-06-18.mp4"></video>

![image-20230919130848139](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309191308288.png)

signOut apiå¯ä»¥å–æ¶ˆ

##### cart

import svg

````jsx
import { ReactComponent as ShopIcon } from "../../assets/shopping-bag.svg";
````

ä½¿ç”¨icon

```jsx
  <div className="cart-icon__container" onClick={toggleCartOpen}>
      <ShopIcon className="icon-img" />
      <span className="icon-count">{cartCount}</span>
    </div>
```

è®¾ç½®onclickï¼Œå»ç¿»è½¬icon,

é¦–å…ˆå…ˆå®šä¹‰useContext

```jsx
import { createContext, useEffect, useState } from "react";
export const CartContext = createContext({
  isCartOpen: false,
  setIsCartOpen: () => {},})
```

åˆ©ç”¨hookså°†å…¶å…³è”

```jsx
export const CartProvider = ({ children }) => {
  const [isCartOpen, setIsCartOpen] = useState(false);
    const value = {
    isCartOpen,
    setIsCartOpen,
    cartItems,
    addItemToCart,
    cartCount,
  };
  return <CartContext.Provider value={value}>{children}</CartContext.Provider>;
};
```

ç„¶ååœ¨iconä¸­ä½¿ç”¨

```jsx
  const { isCartOpen, setIsCartOpen, cartCount } = useContext(CartContext);
const toggleCartOpen = () => setIsCartOpen(!isCartOpen);
```

```jsx
 <div className="cart-icon__container" onClick={toggleCartOpen}>
      <ShopIcon className="icon-img" />
      <span className="icon-count">{cartCount}</span>
    </div>
```

æ•ˆæœ

![image-20230924091550533](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309240915860.png)

![image-20230924091602782](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309240916861.png)

#### ç°åœ¨å®ç°ç‚¹å‡»shopé‡Œé¢çš„add to cartï¼Œå°†ä»–æ·»åŠ åˆ°cart-dropdown

* new checkout-dropdown

  * ```jsx
      return (
        <div className="cart-dropdown__container">
          <div className="cart-dropdown__items">
            {cartItems.map(item => (
              <CartItem key={item.id} cartItem={item} />
            ))}
          </div>
          <Button onClick = {checkoutHandler}>GO TO CHECKOUT</Button>
        </div>
      );
      
    //cart-item UI
    return (
        <div className="cart-item__container">
          <img src={imageUrl} alt={title} />
          <div  className="item-details">
            <span className="name">{title}</span>
            <span className="price">
              {quantity} x ${price}
            </span>
          </div>
        </div>
      );
    ```

* shop ç•Œé¢

  * ```jsx
      const { products } = useContext(ProductsContext);
      return (
        <div className="products-card__container">
          {products.map(product => (
            <ProductCard key={product.id} product={product}></ProductCard>
          ))}
        </div>
      );
    ```

* peroduct ui

  * ```jsx
      return (
        <div className="product-card__container">
          <img className="product-card__img" src={imageUrl} alt={title} />
          <div className="product-card__text">
            <span className="product-card__title">{title}</span>
            <span className="product-card__price">{price}</span>
          </div>
          <Button  buttonType="inverted" onClick={addProductToCart}>Add To Cart</Button>
        </div>
      );
    ```

* å¦‚ä½•å®ç°ç‚¹å‡»æŒ‰é’®ï¼Œå°±å®Œæˆæ·»åŠ ï¼Œåœ¨cartContextå®Œæˆ

  * æ·»åŠ é»˜è®¤å€¼

    * ```jsx
      export const CartContext = createContext({
        isCartOpen: false,
        setIsCartOpen: () => {},
        cartItems: [],
        addCartItems: () => {},
      ```

  * åˆ›å»ºä¸»é¢˜å‡½æ•°å®ç°

    * ```jsx
      const addCartItem = (cartItems, productAddTo) => {
        //find it item contains productToAdd
        const existingCartItem = cartItems.find(item => item.id === productAddTo.id);
        console.log(existingCartItem);
          //æˆ‘ä»¬å…ˆå¯»æ‰¾ï¼Œè´­ç‰©è½¦ä¸­æ˜¯å¦æœ‰ï¼Œæ·»åŠ å•†å“ï¼Œ
      
        // if found , increment  quantity
        if (existingCartItem) {
          return cartItems.map(item =>
            item.id === productAddTo.id
              ? { ...item, quantity: item.quantity + 1 }
              : item
          );
            å¦‚æœæœ‰çš„è¯æˆ‘ä»¬å°±ï¼Œå°†æ•°é‡åŠ 1ï¼Œå¦åˆ™å°±ä¸åŠ¨
        }
        // return new array with modified cart items/ new cart items
        return [...cartItems, { ...productAddTo, quantity: 1 }];
          æˆ‘ä»¬å°±å°±åœ¨è´­ç‰©è½¦åˆ›å»ºä¸€ä»¶å•†å“
      };
      ```

    * ##### å°†å‡½æ•°æ”¾è¿›useStateçš„setå‡½æ•°

      * ```jsx
          const addItemToCart = productAddTo => {
            setCartItems(addCartItem(cartItems, productAddTo));
          };
        ```

  * å°†useStateå’Œcontextå…³è”

    * ```jsx
       const value = {
          isCartOpen,
          setIsCartOpen,
          cartItems,
          addItemToCart,
          }
      ```

  * å»å¼•ç”¨æ–¹æ³•

    * ```jsx
        const {addItemToCart} = useContext(CartContext);
        const { title, imageUrl, price } = product;
        const addProductToCart = () => addItemToCart(product);
        <Button  buttonType="inverted" onClick={addProductToCart}>Add To Cart</Button>
        
      ```

##### æ•ˆæœ

<video src="D:\Video\Captures\React App - Google Chrome 2023-09-26 17-04-45.mp4"></video>

* å®ç°æŒ‰é’®é‡Œé¢çš„æ•°å­—ä¹Ÿå®æ—¶æ›´æ–°ï¼Œæ·»åŠ å‡ ä»¶äº§å“è¿›å»ï¼Œæˆ‘æ•°å­—å°±ç´¯åŠ 

  * ```jsx
     cartCount: 0,
           const [cartCount, setCartCount] = useState(0);
    ```

  * ```jsx
      useEffect(() => {
        const newCartCount = cartItems.reduce(
          (acc, item) => acc + item.quantity,
          0
        );
        setCartCount(newCartCount);
      }, [cartItems]);
    ```

  * ```jsx
      const { isCartOpen, setIsCartOpen, cartCount } = useContext(CartContext);
      
    <span className="icon-count">{cartCount}</span>
    
    ```

<video src="C:\Users\jackdeng\Downloads\æ— æ ‡é¢˜è§†é¢‘â€”â€”ä½¿ç”¨Clipchampåˆ¶ä½œ.mp4"></video>

#### checkout page

* checkout 

  * ```jsx
      const { cartItems, cartTotal } = useContext(CartContext);
      console.log(cartItems);
      return (
        <div className="checkout-container">
          <div className="checkout-header">
            <div className="checkout-header__title">
              <span>Product</span>
            </div>
            <div className="checkout-header__title">
              <span>Description</span>
            </div>
            <div className="checkout-header__title">
              <span>Quantity</span>
            </div>
            <div className="checkout-header__title">
              <span>Price</span>
            </div>
            <div className="checkout-header__title">
              <span>Remove</span>
            </div>
          </div>
          {cartItems.map(cartItem => {
            return <CheckoutItem cartItem={cartItem} />;
          })}
          <span className="total-price">
            {cartTotal ? `Total: ï¿¡${cartTotal}` : `total: 0`}
          </span>
        </div>
      );
    ```

* checkout item

  * ```jsx
      return (
        <div className="checkout-item__container">
          <div className="image-box">
            <img src={imageUrl} alt={`${title}`} />
          </div>
          <span className="title">{title}</span> 
          <span className="quantity-container">
           <div onClick={removeItemHandler}>
           <AiOutlineMinusCircle />
           </div>
            <span className="value">{quantity}</span>
           <div onClick={addItemHandler}>
           <AiOutlinePlusCircle />
           </div>
          </span>
          <span className="price">{price}</span>
          <span className="remove-button" onClick={clearItemHandler}>
            &#10005;
          </span>
        </div>
      );
    ```

  * ![image-20230926174830069](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202309261748416.png)

* å®ç°ç‚¹å‡»iconæ·»åŠ quantityæˆ–å‡å°‘ï¼Œå½“åªå‰©ä¸‹1æ—¶ï¼Œå†ç‚¹å‡»å°±ç§»é™¤

  * addItem,åŠ è°ƒç”¨ä¹‹å‰å†™å¥½çš„

    * ```jsx
      const addCartItem = (cartItems, productAddTo) => {
        //find it item contains productToAdd
        const existingCartItem = cartItems.find(item => item.id === productAddTo.id);
        console.log(existingCartItem);
      
        // if found , increment  quantity
        if (existingCartItem) {
          return cartItems.map(item =>
            item.id === productAddTo.id
              ? { ...item, quantity: item.quantity + 1 }
              : item
          );
        }
        // return new array with modified cart items/ new cart items
        return [...cartItems, { ...productAddTo, quantity: 1 }];
      };
      ```

  * remove item

    * ```jsx
      const removeItemCart = (cartItems, productToRemove) => {
        // find the item to remove
        const isExistingCartItem = cartItems.find(
          cartItem => cartItem.id === productToRemove.id
        );
        // is the item quantity is 1, remove item.
        if (isExistingCartItem.quantity === 1) {
          return cartItems.filter(cartItem => cartItem.id !== productToRemove.id);
        }
        // return back the left cartItem
        return cartItems.map(cartItem =>
          cartItem.id === productToRemove.id
            ? { ...cartItem, quantity: cartItem.quantity - 1 }
            : cartItem
        );
      };
      ```

  * clear item

    * ```jsx
      const clearCartItem = (cartItems, cartItemToClear) =>
        cartItems.filter(cartItem => cartItem.id !== cartItemToClear.id);
      
      ```

* åº”ç”¨æ–¹æ³•

  * ```jsx
       const addItemToCart = productAddTo => {
        setCartItems(addCartItem(cartItems, productAddTo));
      };
     const removeItemFromCart = productAddTo => {
        setCartItems(removeItemCart(cartItems, productAddTo));
      };
      const clearItemFromCart = cartItemToClear => {
        setCartItems(clearCartItem(cartItems, cartItemToClear));
      };
    ```

  * ```jsx
    const clearItemHandler = () => clearItemFromCart(cartItem);
      const addItemHandler = () => addItemToCart(cartItem);
      const removeItemHandler = () => removeItemFromCart(cartItem);
    ```

* total å®ç°

  * ```jsx
      useEffect(() => {
        const newCartTotal = cartItems.reduce(
          (acc, item) => acc + item.quantity * item.price,
          0
        );
        setCartTotal(newCartTotal);
      }, [cartItems]);
    ```

æ•ˆæœ

<video src="D:\Video\Captures\React App - Google Chrome 2023-09-26 17-55-18.mp4"></video>

### STYLE COMPONENTS

```JSX
const Button = styled.a<{ $primary?: boolean; }>`
  --accent-color: white;


  /* This renders the buttons above... Edit me! */
  background: transparent;
  border-radius: 3px;
  border: 1px solid var(--accent-color);
  color: var(--accent-color);
  display: inline-block;
  margin: 0.5rem 1rem;
  padding: 0.5rem 0;
  transition: all 200ms ease-in-out;
  width: 11rem;


  &:hover {
    filter: brightness(0.85);
  }


  &:active {
    filter: brightness(1);
  }


  /* The GitHub button is a primary button
   * edit this to target it specifically! */
  ${props => props.$primary && css`
    background: var(--accent-color);
    color: black;
  `}
```

>>>>>>> origin/jack-study-navigation



# useReducer

`useReducer` is a React Hook that lets you add a [reducer](https://react.dev/learn/extracting-state-logic-into-a-reducer) to your component.

```jsx
const [state, dispatch] = useReducer(reducer, initialArg, init?)
```

#### Parameters 

- `reducer`: The reducer function that specifies how the state gets updated. It must be pure, should take the state and action as arguments, and should return the next state. State and action can be of any types.
- `initialArg`: The value from which the initial state is calculated. It can be a value of any type. How the initial state is calculated from it depends on the next `init` argument.
- **optional** `init`: The initializer function that should return the initial state. If itâ€™s not specified, the initial state is set to `initialArg`. Otherwise, the initial state is set to the result of calling `init(initialArg)`.

#### Returns 

`useReducer` returns an array with exactly two values:

1. The current state. During the first render, itâ€™s set to `init(initialArg)` or `initialArg` (if thereâ€™s no `init`).
2. The [`dispatch` function](https://react.dev/reference/react/useReducer#dispatch) that lets you update the state to a different value and trigger a re-render.

## Comparing `useState` and `useReducer` 

Reducers are not without downsides! Hereâ€™s a few ways you can compare them:

- **Code size:** Generally, with `useState` you have to write less code upfront. With `useReducer`, you have to write both a reducer function *and* dispatch actions. However, `useReducer` can help cut down on the code if many event handlers modify state in a similar way.
- **Readability:** `useState` is very easy to read when the state updates are simple. When they get more complex, they can bloat your componentâ€™s code and make it difficult to scan. In this case, `useReducer` lets you cleanly separate the *how* of update logic from the *what happened* of event handlers.
- **Debugging:** When you have a bug with `useState`, it can be difficult to tell *where* the state was set incorrectly, and *why*. With `useReducer`, you can add a console log into your reducer to see every state update, and *why* it happened (due to which `action`). If each `action` is correct, youâ€™ll know that the mistake is in the reducer logic itself. However, you have to step through more code than with `useState`.
- **Testing:** A reducer is a pure function that doesnâ€™t depend on your component. This means that you can export and test it separately in isolation. While generally itâ€™s best to test components in a more realistic environment, for complex state update logic it can be useful to assert that your reducer returns a particular state for a particular initial state and action.
- **Personal preference:** Some people like reducers, others donâ€™t. Thatâ€™s okay. Itâ€™s a matter of preference. You can always convert between `useState` and `useReducer` back and forth: they are equivalent!

We recommend using a reducer if you often encounter bugs due to incorrect state updates in some component, and want to introduce more structure to its code. You donâ€™t have to use reducers for everything: feel free to mix and match! You can even `useState` and `useReducer` in the same component.

![image-20231004110918140](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310041109514.png)

![image-20231004193234982](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310041932383.png)

![image-20231005110213818](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310051102105.png)

e.g

```jsx
function handleClick() {
  dispatch({ type: 'incremented_age' });
```



```jsx
import { useReducer } from 'react';

function reducer(state, action) {
  if (action.type === 'incremented_age') {
    return {
      age: state.age + 1
    };
  }
  throw Error('Unknown action.');
}

export default function Counter() {
  const [state, dispatch] = useReducer(reducer, { age: 42 });

  return (
    <>
      <button onClick={() => {
        dispatch({ type: 'incremented_age' })
      }}>
        Increment age
      </button>
      <p>Hello! You are {state.age}.</p>
    </>
  );
}

```

 Updating arrays without mutation 

In JavaScript, arrays are just another kind of object. [Like with objects](https://react.dev/learn/updating-objects-in-state), **you should treat arrays in React state as read-only.** This means that you shouldnâ€™t reassign items inside an array like `arr[0] = 'bird'`, and you also shouldnâ€™t use methods that mutate the array, such as `push()` and `pop()`.

Instead, every time you want to update an array, youâ€™ll want to pass a *new* array to your state setting function. To do that, you can create a new array from the original array in your state by calling its non-mutating methods like `filter()` and `map()`. Then you can set your state to the resulting new array.

Here is a reference table of common array operations. When dealing with arrays inside React state, you will need to avoid the methods in the left column, and instead prefer the methods in the right column:

| avoid (mutates the array) | prefer (returns a new array)        |                                                              |
| ------------------------- | ----------------------------------- | ------------------------------------------------------------ |
| adding                    | `push`, `unshift`                   | `concat`, `[...arr]` spread syntax ([example](https://react.dev/learn/updating-arrays-in-state#adding-to-an-array)) |
| removing                  | `pop`, `shift`, `splice`            | `filter`, `slice` ([example](https://react.dev/learn/updating-arrays-in-state#removing-from-an-array)) |
| replacing                 | `splice`, `arr[i] = ...` assignment | `map` ([example](https://react.dev/learn/updating-arrays-in-state#replacing-items-in-an-array)) |
| sorting                   | `reverse`, `sort`                   | copy the array first ([example](https://react.dev/learn/updating-arrays-in-state#making-other-changes-to-an-array)) |

![image-20231006135057983](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310061350746.png)

![image-20231006135151115](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310061351697.png)

![image-20231006135220657](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310061352057.png)

![image-20231008150149755](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310081502290.png)

![image-20231009103421967](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310091034106.png)

![image-20231009103500278](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310091035353.png)

![image-20231009103532838](https://makeforpicgo.oss-cn-chengdu.aliyuncs.com/study/202310091035129.png)

### accessbility and flow of data

pasas every single reducer

like this:

>
>
>```jsx
>const initialValue = {
>  currentUser: null,
>};
>const USER_ACTION_TYPE = {
>  SET_CURRENT_USER: "SET_CURRENT_USER",
>  increment: "increment",
>};
>
>export const userReducer = (state = USER_ACTION_TYPE, action) => {
>  const { type, payload } = action;
>  switch (type) {
>    case USER_ACTION_TYPE.SET_CURRENT_USER:
>      return {
>        ...state,
>        currentUser: payload,
>      };
>    case "increment":
>      return {
>        currentUser: state.currentUser + 1,
>      };
>    default:
>      return state;
>  }
>};
>
>```
>
>root-reducer.jsx
>
>```jsx
>import { combineReducers } from "redux";
>import { userReducer } from "./user.reducer";
>export const rootReducer = combineReducers({
>  user: userReducer,
>});
>
>```
>
>this is redux how to work.

store

```jsx
import { compose, createStore, applyMiddleware } from "redux";
import logger from "redux-logger";
import { rootReducer } from "./root-reducer";
const midlewares = [logger];
const composeMiddleware = compose(applyMiddleware(...midlewares));
//rooter-reducer
export const store = createStore(rootReducer, undefined, midlewares);

```

å°†root-reducerå¯¼å…¥åˆ°storeï¼Œåˆ©ç”¨createStoreåˆ›å»ºä¸€ä¸ªstore

index.js

```jsx
import { Provider } from "react-redux";
<Provider store={store}>
      <BrowserRouter>
        <UserProvider>
          <ProductsProvider>
            <CartProvider>
              <App />
            </CartProvider>
          </ProductsProvider>
        </UserProvider>
      </BrowserRouter>
    </Provider>
```

æˆ‘ä»¬åœ¨index.jsä½¿ç”¨react-reduxï¼Œå°†reduxä¸æˆ‘ä»¬çš„appå…³è”èµ·æ¥

